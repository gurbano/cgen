!function t(e,r,i){function o(n,a){if(!r[n]){if(!e[n]){var p="function"==typeof require&&require;if(!a&&p)return p(n,!0);if(s)return s(n,!0);var c=new Error("Cannot find module '"+n+"'");throw c.code="MODULE_NOT_FOUND",c}var u=r[n]={exports:{}};e[n][0].call(u.exports,function(t){var r=e[n][1][t];return o(r?r:t)},u,u.exports,t,e,r,i)}return r[n].exports}for(var s="function"==typeof require&&require,n=0;n<i.length;n++)o(i[n]);return o}({"/home/gurbano/workspace/snippets/cgen/app/scripts/app/cgen.js":[function(t,e,r){"use strict";var i=t("./modules/WorldLoader"),o=t("./modules/UserStore"),s=["left","right","up","down"],n={VIEW_ANGLE:45,NEAR:.1,FAR:1e4},a=(THREE.Vector3(1,0,0),THREE.Vector3(0,0,0),function(t,e){var r=this;s.forEach(function(t){r.S.keys[t]=r.keyboard.pressed(t)})}),p=function(t,e){this.PG.entity&&this.PG.entity.update(this.S.keys)},c=function(t,e){if(this.world&&this.world.intersect){var r=this.world.get("axisHelper");r.position.x=this.world.intersect.x,r.position.y=this.world.intersect.y,r.position.z=this.world.intersect.z,this.world.dig(this.world.intersect.obj)}},u=function(t,e){this.S.camera&&this.PG.entity&&(this.S.camera.position.x=this.PG.entity.position.x,this.S.camera.position.y=this.PG.entity.position.y,this.S.camera.position.z=this.PG.entity.position.z,this.S.camera.lookAt(this.world.get("helper").position))},h=function(t){this.targetId=t.target,this.target=$("#"+t.target),this.PG={},this.PG.store=new o(t.userId),this.PG.entity=this.PG.store.get(),this.updateFcts=[],this.updateFcts.push(a),this.updateFcts.push(p),this.updateFcts.push(u),this.updateFcts.push(c),this.S={},this.S.keys={},this.S.scene=void 0,this.S.renderer=void 0};h.prototype.hello=function(t){return console.info("Hello "+this.PG.entity.userName),this},h.prototype.initHardware=function(t){return n.WIDTH=this.target.width(),n.HEIGHT=this.target.height(),n.ASPECT=n.WIDTH/n.HEIGHT,console.info("Application initialized",n.WIDTH,n.HEIGHT),this.keyboard=new THREEx.KeyboardState,this.S.scene=new THREE.Scene,this.S.camera=new THREE.PerspectiveCamera(n.VIEW_ANGLE,n.ASPECT,n.NEAR,n.FAR),this.S.scene.add(this.S.camera),this.S.renderer=new THREE.WebGLRenderer,this.S.renderer.setSize(n.WIDTH,n.HEIGHT),this.target.append(this.S.renderer.domElement),this},h.prototype.initWorld=function(t){this.world=new i(this).init(),this.S.scene.add(this.world.getRoot());var e=new THREE.PointLight(16777215);return e.position.x=10,e.position.y=50,e.position.z=130,this.S.scene.add(e),this},h.prototype.start=function(){return console.info("Application started"),this.loop(),this},h.prototype.queryControls=function(t){return this.S.keys[t]},h.prototype.loop=function(){function t(i){requestAnimationFrame(t.bind(e)),r=r||i-1e3/60;var o=Math.min(200,i-r);r=i,e.updateFcts.forEach(function(t){t.bind(e)(o/1e3,i/1e3)}),this.S.renderer.render(this.S.scene,this.S.camera)}var e=this,r=null;requestAnimationFrame(t.bind(e))},e.exports=h},{"./modules/UserStore":"/home/gurbano/workspace/snippets/cgen/app/scripts/app/modules/UserStore.js","./modules/WorldLoader":"/home/gurbano/workspace/snippets/cgen/app/scripts/app/modules/WorldLoader.js"}],"/home/gurbano/workspace/snippets/cgen/app/scripts/app/dep/ImprovedNoise.js":[function(t,e,r){"use strict";var i=function(){function t(t){return t*t*t*(t*(6*t-15)+10)}function e(t,e,r){return e+t*(r-e)}function r(t,e,r,i){var o=15&t,s=8>o?e:r,n=4>o?r:12==o||14==o?e:i;return(0==(1&o)?s:-s)+(0==(2&o)?n:-n)}for(var i=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],o=0;256>o;o++)i[256+o]=i[o];return{noise:function(o,s,n){var a=~~o,p=~~s,c=~~n,u=255&a,h=255&p,d=255&c;o-=a,s-=p,n-=c;var m=o-1,y=s-1,l=n-1,f=t(o),g=t(s),E=t(n),w=i[u]+h,v=i[w]+d,b=i[w+1]+d,H=i[u+1]+h,S=i[H]+d,T=i[H+1]+d;return e(E,e(g,e(f,r(i[v],o,s,n),r(i[S],m,s,n)),e(f,r(i[b],o,y,n),r(i[T],m,y,n))),e(g,e(f,r(i[v+1],o,s,l),r(i[S+1],m,s,n-1)),e(f,r(i[b+1],o,y,l),r(i[T+1],m,y,l))))}}};e.exports=i},{}],"/home/gurbano/workspace/snippets/cgen/app/scripts/app/modules/UserStore.js":[function(t,e,r){"use strict";var i={x:0,y:2e3,z:2e3},o=function(t){this.userId=t};o.prototype.get=function(){return{position:i,userId:this.userId,userName:"gurbano",update:function(t){}}},o.prototype.set=function(t){i.x=t.position.x,i.y=t.position.y,i.z=t.position.z},e.exports=o},{}],"/home/gurbano/workspace/snippets/cgen/app/scripts/app/modules/WorldLoader.js":[function(t,e,r){"use strict";function i(){var t=new THREE.CylinderGeometry(0,20,100,3);return t.translate(0,50,0),t.rotateX(Math.PI/2),new THREE.Mesh(t,new THREE.MeshNormalMaterial)}function o(t,e){for(var r=t*e,i=new Uint8Array(r),o=new s,n=1,a=100*Math.random(),p=0;4>p;p++){for(var c=0;r>c;c++){var u=c%t,h=~~(c/t);i[c]+=Math.abs(o.noise(u/n,h/n,a)*n*1.75)}n*=5}return i}var s=t("../dep/ImprovedNoise"),n=function(t){this.parent=t};n.prototype.init=function(t){return new a(this.parent)};var a=function(t){this.id="world0",this.interceptor={raycaster:new THREE.Raycaster,mouse:new THREE.Vector2,renderer:t.S.renderer,camera:t.S.camera};var e=new THREE.Object3D;this.map={},this.getRoot=function(){return e},this.add("axisHelper",new THREE.AxisHelper(500)),this.add("terrain",this.getTerrain()),this.add("helper",i()),document.addEventListener("mousemove",p.bind(this),!1)};a.prototype.add=function(t,e){this.map[t]=e,this.getRoot().add(e)},a.prototype.get=function(t){return this.map[t]},a.prototype.dig2=function(t){var e=t.face,r=this.geometry,i=3*e.a,o={x:r.attributes.position.array[i],y:r.attributes.position.array[i+1],z:r.attributes.position.array[i+2]},s=3*e.b,n={x:r.attributes.position.array[s],y:r.attributes.position.array[s+1],z:r.attributes.position.array[s+2]},a=3*e.c,p={x:r.attributes.position.array[a],y:r.attributes.position.array[a+1],z:r.attributes.position.array[a+2]};console.info(o,n,p),r.attributes.position.array[i+1]+=1,r.attributes.position.array[s+1]+=1,r.attributes.position.array[a+1]+=1,r.verticesNeedUpdate=!0,r.normalsNeedUpdate=!0,r.elementsNeedUpdate=!0,r.computeVertexNormals(),r.computeFaceNormals()},a.prototype.dig=function(t){var e=t.face,r=this.geometry,i=r.vertices[e.a];r.vertices[e.b],r.vertices[e.c];i.y+=1,r.verticesNeedUpdate=!0,r.normalsNeedUpdate=!0,r.elementsNeedUpdate=!0,r.computeVertexNormals(),r.computeFaceNormals()};var p=function(t){this.interceptor.mouse.x=t.clientX/this.interceptor.renderer.domElement.clientWidth*2-1,this.interceptor.mouse.y=2*-(t.clientY/this.interceptor.renderer.domElement.clientHeight)+1,this.interceptor.raycaster.setFromCamera(this.interceptor.mouse,this.interceptor.camera);var e=this.interceptor.raycaster.intersectObject(this.get("terrain"));e.length>0?this.intersect={x:e[0].point.x,y:e[0].point.y,z:e[0].point.z,obj:e[0]}:this.intersect=void 0},c=1024,u=1024;a.prototype.getTerrainGeometry=function(){if(!this.geometry){var t=(o(c,u),new THREE.PlaneGeometry(1e3,1e3,c-1,u-1));t.rotateX(-Math.PI/2),t.computeFaceNormals(),t.dynamic=!0,this.geometry=t}return this.geometry},a.prototype.getTerrain=function(){var t=new THREE.Mesh(this.getTerrainGeometry(),new THREE.MeshBasicMaterial({wireframe:!0}));return t},a.prototype.updateTerrain=function(t){this.geometry.verticesNeedUpdate=!0},e.exports=n},{"../dep/ImprovedNoise":"/home/gurbano/workspace/snippets/cgen/app/scripts/app/dep/ImprovedNoise.js"}],"/home/gurbano/workspace/snippets/cgen/app/scripts/main.js":[function(t,e,r){"use strict";var i=t("./app/cgen");$(document).ready(function(){var t=new i({target:"three-canvas",userId:"oath01",userName:"gurbano"});t.hello().initHardware({}).initWorld({}).start()})},{"./app/cgen":"/home/gurbano/workspace/snippets/cgen/app/scripts/app/cgen.js"}]},{},["/home/gurbano/workspace/snippets/cgen/app/scripts/main.js"]);